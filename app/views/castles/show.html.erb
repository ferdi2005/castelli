<% provide(:title, @castle.itemlabel.capitalize) %>

<div class="level">
    <% unless @castle.image.nil? %>
        <div class="level-item">
            <%= image_tag @castle.image, width: "300px" %>
        </div>
    <% end %>

    <div class="level-item">
        <h1 class="title is-2 is-primary"><%= @castle.itemlabel.capitalize %></h1>
        <h2 class="subtitle" ><%= @castle.description %></h2>
    </div>
<!-- map -->
<div id="mapid" class="is-centered" style="height: 360px;"></div>
<script>
    var mymap = L.map('mapid').setView([<%= @castle.latitude %> , <%= @castle.longitude %>], 18);

    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | &#127245; <a href="https://wikidata.org/">Wikidata</a>'
        }).addTo(mymap);

    L.marker([ <%= @castle.latitude %>,<%= @castle.longitude %>]).addTo(mymap)
        .bindPopup('<%= @castle.itemlabel.capitalize %>')
        .openPopup();
</script>
<!-- end map stuff -->

<br />
<b>Indirizzo:</b>
<a href="https://www.openstreetmap.org/?mlat=<%= @castle.latitude %>&mlon=<%= @castle.longitude %>"><%= return_address(@castle)%></a>
<hr />
<br />
<div class="buttons is-vertical">
    <%= link_to 'Categoria su Commons', "https://commons.wikimedia.org/wiki/Category:#{@castle.commons}", class: 'button is-primary is-light' unless @castle.commons.nil?%>
    <br/>
    <br/>
    <%= link_to 'Item su Wikidata', "https://wikidata.org/wiki/#{@castle.item}", class: 'button is-primary is-light' %>
    <br/>
    <br/>
    <br/>
    <%= link_to 'Voce su Wikipedia', @castle.wikipedia, class: 'button is-primary is-light' unless @castle.wikipedia.nil? %>
</div>