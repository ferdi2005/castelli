<%= provide(:title, "Castelli") %>

<div id="mymap"></div>

<script type="module">
    import "leaflet";
    import "leaflet.markercluster";

    var tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | &#127245; <a href="https://wikidata.org/">Wikidata</a>'
        });
        
    var latlng = L.latLng(42.135, 12.678);

    var map = L.map('mymap', {center: latlng, zoom: 7, layers: [tiles]});

    var markers = L.markerClusterGroup();
    <%= render partial: "castle", collection: @castles, cached: true %>
    
    map.addLayer(markers);

</script>
